---
interface Props {
  title: string;
  description: string;
  icon: string;
  reversed?: boolean;
  color?: 'brand' | 'accent' | 'green';
}

const { title, description, icon, reversed = false, color = 'brand' } = Astro.props;

const colorMap: Record<string, { icon: string; glow: string; border: string }> = {
  brand: {
    icon: 'text-brand-400',
    glow: 'rgba(245, 158, 11, 0.1)',
    border: 'rgba(245, 158, 11, 0.2)',
  },
  accent: {
    icon: 'text-accent-400',
    glow: 'rgba(56, 189, 248, 0.1)',
    border: 'rgba(56, 189, 248, 0.2)',
  },
  green: {
    icon: 'text-emerald-400',
    glow: 'rgba(52, 211, 153, 0.1)',
    border: 'rgba(52, 211, 153, 0.2)',
  },
};

const c = colorMap[color];

const icons: Record<string, string> = {
  worktrees: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/>',
  docker: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"/>',
  status: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>',
};
---

<div class={`spotlight-feature ${reversed ? 'reversed' : ''} animate-on-scroll`}>
  <div>
    <div class={`w-14 h-14 rounded-2xl flex items-center justify-center mb-6`} style={`background: ${c.glow}; border: 1px solid ${c.border};`}>
      <svg class={`w-7 h-7 ${c.icon}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <Fragment set:html={icons[icon]} />
      </svg>
    </div>
    <h3 class="text-2xl md:text-3xl font-semibold text-white mb-4">{title}</h3>
    <p class="text-gray-300 leading-relaxed text-lg">{description}</p>
  </div>
  <div class="rounded-2xl border border-surface-700/50 overflow-hidden" style={`background: linear-gradient(135deg, ${c.glow}, rgba(15, 23, 42, 0.5)); min-height: 220px;`}>
    <div class="p-6 h-full flex items-center justify-center">
      <svg class={`w-20 h-20 ${c.icon} opacity-20`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <Fragment set:html={icons[icon]} />
      </svg>
    </div>
  </div>
</div>
